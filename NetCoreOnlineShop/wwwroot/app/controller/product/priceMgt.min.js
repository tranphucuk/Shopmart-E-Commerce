var price={init:function(){this.registerEvents()},registerEvents:function(){$("#frm-product-Price").validate({errorClass:"red",rules:{txtQuantityFrom:{number:!0,min:1},txtQuantityTo:{number:!0,min:2},txtPrice:{number:!0,min:1}}});$("#add-new-price").off("click").on("click",function(){var t=$("#template-price-product-management").html(),n=Mustache.render(t,{From:1,To:2,Price:1});n!=""&&$("#tbl-price-content").append(n)});$("body").on("click",".btn-remove-price",function(){$(this).closest("tr").remove()});$("#btn-save-price").off("click").on("click",function(){var i=$("#frm-product-Price").validate(),t=$("#productId").val(),n;i.form()&&(n=[],$("#tbl-price-content").find("tr").each(function(i,r){var u={};u.Id=$(r).attr("data-id");u.ProductId=t;u.FromQuantity=$(r).find(".txt-from-quantity").val();u.ToQuantity=$(r).find(".txt-to-quantity").val();u.Price=$(r).find(".txtPrice").val();n.push(u)}),$.ajax({type:"POST",url:"/Admin/Product/SaveProductPrice",data:{wholePriceViewModels:n,productId:t},beforeSend:common.runLoadingIndicator(),success:function(){common.notify("Save success","success");common.stopLoadingIndicator();$("#product-price-manager").modal("hide")},error:function(n){console.log(n);common.notify("Error: "+n,"error");common.stopLoadingIndicator()}}))})},loadData:function(n){$("#product-price-manager").modal("show");var t="",i=$("#template-price-product-management").html();$.ajax({type:"GET",url:"/Admin/Product/GetPrice",data:{productId:n},beforeSend:common.runLoadingIndicator(),success:function(n){$.each(n,function(n,r){t+=Mustache.render(i,{Id:r.Id,From:r.FromQuantity,To:r.ToQuantity,Price:r.Price})});t!=null?$("#tbl-price-content").html(t):$("#tbl-price-content").empty();common.stopLoadingIndicator()},error:function(n){console.log(n);common.notify("Error: "+n,"error");common.stopLoadingIndicator()}})}};price.init();