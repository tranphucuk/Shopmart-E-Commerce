var bannerPage={init:function(){$.when(bannerPage.loadPosition(),bannerPage.loadPage()).then(function(){bannerPage.registerEvents()})},registerEvents:function(){$("body").on("click",".btnManagerAdv",function(){var n=$(this).attr("data-id");$("#hid-adv-id").val(n);$("#tbl-gallery-content").html("");bannerPage.loadAdsPage(n)});$("#btn-add-ads").on("click",function(){var t="",i=$("#add-ads-template").html(),n={};n.PageName=bannerPage.assignPagesToDropDown();n.Position=bannerPage.assignPositionsToDropDown();t=Mustache.render(i,n);$("#tbl-gallery-content").append(t)});$("#btn-save-ads").on("click",function(){var n=$("#hid-adv-id").val(),t=[];$.each($("#tbl-gallery-content tr"),function(i,r){var u={},f=$(r).find("button.btn-remove-img").attr("data-id");f!=undefined&&f!=0&&f!=""&&(u.Id=f);u.Position=$(r).find("select.ddl-position").val();u.AdvertisementId=n;u.AdvertisementPageNameId=$(r).find("select.ddl-pages").val();t.push(u)});$.ajax({type:"POST",url:"/Admin/Banner/SaveAdsPosition",data:{adsPages:t,adsId:n},beforeSend:common.runLoadingIndicator(),success:function(){common.notify("Save advertisement success","success");$("#banner-img-gallery").modal("hide");common.stopLoadingIndicator()}})});$("body").on("click",".btn-remove-img",function(){$(this).closest("tr").remove()})},positionData:[],positionDropDropDown:[],pageData:[],pageDropDown:[],loadPosition:function(){return $.ajax({type:"GET",url:"/Admin/Banner/LoadPosition",success:function(n){bannerPage.positionData=n}})},assignPositionsToDropDown:function(n){var t='<select class="form-control ddl-position">';return $.each(bannerPage.positionData,function(i,r){t+=n!=undefined&&n!=""&&i==n?'<option value="'+i+'" selected="selected" >'+r+"<\/option>":'<option value="'+i+'" >'+r+"<\/option>"}),t+="<\/select>"},loadPage:function(){return $.ajax({type:"GET",url:"/Admin/Banner/LoadPage",success:function(n){bannerPage.pageData=n}})},assignPagesToDropDown:function(n){var t='<select class="form-control ddl-pages">';return $.each(bannerPage.pageData,function(i,r){t+=n!=undefined&&n!=""&&r.Id==n?'<option value="'+n+'" selected="selected" >'+r.Name+"<\/option>":'<option value="'+r.Id+'" >'+r.Name+"<\/option>"}),t+="<\/select>"},loadAdsPage:function(n){var t="",i=$("#add-ads-template").html();$.ajax({type:"GET",url:"/Admin/Banner/GetListAdsPage",data:{id:n},dataType:"json",success:function(n){$.each(n,function(n,r){var u={};u.Id=r.Id;u.PageName=bannerPage.assignPagesToDropDown(r.AdvertisementPageNameId);u.Position=bannerPage.assignPositionsToDropDown(r.Position);t+=Mustache.render(i,u)});$("#tbl-gallery-content").html(t);$("#banner-img-gallery").modal("show")}})}};bannerPage.init();