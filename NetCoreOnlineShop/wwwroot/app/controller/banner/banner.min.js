var advertisement={init:function(){this.loadData();this.registerEvents()},registerEvents:function(){var n=$("#frm-adv").validate({errorClass:"red",rules:{txtAdvName:"required",txtAdvImage:"required",description:"required",url:"required",order:{required:!0,number:!0,min:1},width:{required:!0,number:!0,min:1},height:{required:!0,number:!0,min:1}},messages:{txtAdvName:{required:"Advertisement name is required"},txtAdvImage:{required:"Image is required"},description:{required:"Description is required"},url:{required:"Url is required"},order:{required:"Order is required",number:"Please enter a valid number",min:"Please enter a positive number"},width:{required:"Width is required",number:"Please enter a valid number",min:"Please enter a positive number"},height:{required:"Height is required",number:"Please enter a valid number",min:"Please enter a positive number"}},showErrors:function(t,i){if(n.submitted){var r="";$.each(i,function(){r+="* "+this.message+"\n"});common.notify(r,"warn");submitted=!1}}});$("body").on("click",".btnUpdateAdv",function(){var n=$(this).attr("data-id");$("#hid-adv-id").val(n);$.ajax({type:"GET",url:"/Admin/Banner/GetDetails",data:{id:n},beforeSend:common.runLoadingIndicator(),success:function(n){$("#txt-adv-name").val(n.Name);$("#txt-adv-image").val(n.Image);$("#txt-banner-desc").val(n.Description);$("#txt-banner-url").val(n.Url);$("#txt-banner-order").val(n.SortOrder);$("#txt-banner-width").val(n.Width);$("#txt-banner-height").val(n.Height);$("#ck-banner-status").prop("checked",n.Status);$("#hid-adv-date").val(n.CreatedDate);common.stopLoadingIndicator();$("#add-edit-banner").modal("show")}})});$("#btn-create-adv").on("click",function(){advertisement.clearData();$("#add-edit-banner").modal("show")});$("#btn-save-adv").on("click",function(){var i=$("#hid-adv-id").val(),t;n.form()&&(t=new FormData,i!=undefined&&i!=""&&(t.append("Id",i),t.append("CreatedDate",$("#hid-adv-date").val())),t.append("picture",advertisement.imageData),t.append("Name",$("#txt-adv-name").val()),t.append("Image",$("#txt-adv-image").val()),t.append("Description",$("#txt-banner-desc").val()),t.append("Url",$("#txt-banner-url").val()),t.append("SortOrder",$("#txt-banner-order").val()),t.append("Width",$("#txt-banner-width").val()),t.append("Height",$("#txt-banner-height").val()),t.append("Status",$("#ck-banner-status").is(":checked")?1:0),$.ajax({type:"POST",url:"/Admin/Banner/SaveAdvertisement",data:t,processData:!1,contentType:!1,beforeSend:common.runLoadingIndicator(),success:function(n){n==!0?(common.notify("Save success","success"),$("#add-edit-banner").modal("hide"),advertisement.loadData(),common.stopLoadingIndicator()):common.notify("Save failed","error")}}))});$("#btn-select-image").on("click",function(){$("#file-adv-thumbnail").val("");$("#file-adv-thumbnail").click()});$("#file-adv-thumbnail").on("change",function(){advertisement.imageData=$(this)[0].files[0];$("#txt-adv-image").val("/admin-side/images/banner/"+advertisement.imageData.name)});$("body").on("click",".btnDeleteAdv",function(){var n=$(this).attr("data-id");common.confirm("Are you sure to remove this ads?",function(){$.ajax({type:"POST",url:"/Admin/Banner/Delete",data:{id:n},success:function(n){n==!0?(common.notify("Delete success","success"),advertisement.loadData()):common.notify("Delete failed","error")}})})})},imageData:[],loadData:function(){var n="",t=$("#tbl-adv-template").html();$.ajax({type:"GET",url:"/Admin/Banner/GetAll",dataType:"json",beforeSend:common.runLoadingIndicator(),success:function(i){$.each(i,function(i,r){var u={};u.Id=r.Id;u.Name=r.Name;u.Image=common.formatImage(r.Image,r.Name);u.Description=r.Description;u.CreatedDate=common.formatDateTime(r.CreatedDate);u.Status=common.getStatusLabel(r.Status);n+=Mustache.render(t,u)});$("#tbl-adv-content").html(n);common.stopLoadingIndicator()}})},clearData:function(){$("#hid-adv-id").val("");$("#txt-adv-name").val("");$("#txt-adv-image").val("");$("#txt-banner-desc").val("");$("#txt-banner-url").val("");$("#txt-banner-width").val("");$("#txt-banner-height").val("");$("#ck-banner-status").prop("checked",!0)}};advertisement.init();