var cart={init:function(){$.when(cart.loadColors(),cart.loadSize()).then(function(){cart.loadData();cart.registerEvents()})},registerEvents:function(){$("body").on("click",".btn-minus-quantity",function(){var n=$(this).closest(".qty").find("input.txt-quantity");$(n).val()>=2&&$(n).val($(n).val()-1)});$("body").on("click",".btn-plus-quantity",function(){var n=$(this).closest(".qty").find("input.txt-quantity");$(n).val(parseInt($(n).val())+1)});$("body").on("mouseout",".btn-plus-quantity",function(){var n=$(this).closest(".qty").find("input.txt-quantity").val(),i=$(this).closest("tr").find(".select-color-list").val(),r=$(this).closest("tr").find(".select-size-list").val(),u=$(this).closest("tr").attr("data-id"),f=$(this).closest("tr").find("span.single-price").html(),e=$(this).closest("tr").find("span.total-price").html(),t=f*n;$(this).closest("tr").find("span.total-price").html(t);$.ajax({type:"GET",url:"/Cart/UpdateCart",data:{productId:u,quantity:n,colorId:i,sizeId:r},success:function(){var n=parseFloat($("#total-bill").html());$("#total-bill").html(n+(t-e))}})});$("body").on("mouseout",".btn-minus-quantity",function(){var n=$(this).closest(".qty").find("input.txt-quantity").val(),i=$(this).closest("tr").find(".select-color-list").val(),r=$(this).closest("tr").find(".select-size-list").val(),u=$(this).closest("tr").attr("data-id"),f=$(this).closest("tr").find("span.single-price").html(),e=$(this).closest("tr").find("span.total-price").html(),t=f*n;$(this).closest("tr").find("span.total-price").html(t);$.ajax({type:"GET",url:"/Cart/UpdateCart",data:{productId:u,quantity:n,colorId:i,sizeId:r},success:function(){var n=parseFloat($("#total-bill").html());$("#total-bill").html(n-(e-t))}})});$("body").on("change",".select-color-list",function(){var n=$(this).val(),t=$(this).closest("tr").find("input.txt-quantity").val(),i=$(this).closest("tr").find(".select-size-list").val(),r=$(this).closest("tr").attr("data-id");$(this).closest("tr").find("span.total-price").html();$.ajax({type:"GET",url:"/Cart/UpdateCart",data:{productId:r,quantity:t,colorId:n,sizeId:i},success:function(){}})});$("body").on("change",".select-size-list",function(){var n=$(this).val(),t=$(this).closest("tr").find("input.txt-quantity").val(),i=$(this).closest("tr").find(".select-color-list").val(),r=$(this).closest("tr").attr("data-id");$(this).closest("tr").find("span.total-price").html();$.ajax({type:"GET",url:"/Cart/UpdateCart",data:{productId:r,quantity:t,colorId:i,sizeId:n},success:function(){}})});$("body").on("click","#remove-cart-item",function(n){n.preventDefault();var t=$(this).closest("tr").data("id");$.ajax({type:"GET",url:"/Cart/RemoveFromCart",data:{productId:t},success:function(){cart.loadData()}})})},loadData:function(){$.ajax({type:"GET",url:"/Cart/GetCart",success:function(n){var t="",r=$("#tbl-cart-template").html(),i=0;$.each(n,function(n,u){var e=u.Product,f={};f.Id=e.Id;f.Url="/product-"+e.SeoAlias+"-"+e.Id+".html";f.Path=e.Image;f.Name=e.Name;f.Price=u.Price;f.Value=u.Quantity;f.TotalPrice=(u.Quantity*u.Price).toFixed(2);i+=parseFloat(f.TotalPrice);f.Color=cart.setSelectColor(u.ColorId);f.Size=cart.setSelectSize(u.SizeId);t+=Mustache.render(r,f)});n.length==0?($(".checkout-btn").removeAttr("href"),$(".checkout-btn").attr("title","0 item available for checkout")):($(".checkout-btn").removeAttr("title"),$(".checkout-btn").attr("href","/checkout.html"));$("#total-bill").text(i);$("#tbl-cart-content").html(t);$("#header-info").load("/ReloadHeader/HeaderDetail")}})},setSelectColor:function(n){var t='<select class="select-color-list">';return $.each(cart.colorData,function(i,r){t+=n!=null&&r.Id==n?'<option value="'+n+'" selected>'+r.Name+"<\/option>":'<option value="'+r.Id+'">'+r.Name+"<\/option>"}),t+="<\/select>"},setSelectSize:function(n){var t='<select class="select-size-list">';return $.each(cart.sizeData,function(i,r){t+=n!=null&&r.Id==n?'<option value="'+n+'" selected>'+r.Name+"<\/option>":'<option value="'+r.Id+'">'+r.Name+"<\/option>"}),t+="<\/select>"},loadColors:function(){return $.ajax({type:"GET",url:"/Cart/LoadColor",success:function(n){cart.colorData=n}})},loadSize:function(){return $.ajax({type:"GET",url:"/Cart/LoadSize",success:function(n){cart.sizeData=n}})},colorData:[],sizeData:[]};cart.init();